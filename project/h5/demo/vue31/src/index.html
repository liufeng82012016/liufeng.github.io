<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>webpack</title>

</head>
<body>
<ul>
    <li>前端工程化：模块化（js、css、资源）；组件化（复用UI、样式、行为）；规范化（目录结构、编码、接口、文档、git管理）；自动化（构建、部署、测试）</li>
    <li>早期的解决方案：grunt/gulp;目前的解决方案：webpack/parcel</li>
    <li>webpack：友好地前端模块化支持、代码压缩混淆、处理浏览器JS兼容性、性能优化等</li>
    <li>webpack.config.js：webpack打包配置文件。因为是node.js开发的，所以可用node.js相关模块；约定打包入口文件为src/index.js,输出为dist/main.js</li>
    <li>webpack插件1：webpack-dev-server，使得每次修改源代码都会自动进行项目的打包和构建；
        npm install webpack-dev-server@3.11.0 -D
        修改webpack.config.js scripts设置环境{ "dev": "webpack serve" }
        再次执行npm run dev报错[webpack-cli] TypeError，升级webpack版本即可
        发现main.js不存在，该文件存在在内存中，而不是磁盘，通过项目跟目录访问
        <!--<script src="/main.js"></script>-->
    </li>
    <li>webpack插件2：htmp-webpack-plugin，类似于模版引擎插件，可定制index.html页面内容。因为index.html没有复制，无法通过localhost:8080访问
        npm install html-webpack-plugin -D
        修改webpack.config.js，导入插件
        npm run dev访问成功，同样，复制的文件存在于内存中，查看网页源代码，index会自动引用生成的js文件
        <!--<script defer src="main.js"></script></head>-->
    </li>
    <li>loader：webpack默认只处理js文件，其他文件需要使用loader。如css-loader,less-loader,babel-loader</li>
    <li>css loader:index.js导入index.css后，打包报错，无法处理css文件
        npm install style-loader css-loader -D
    </li>
    <li>less loader: npm install less-loader less -D</li>
    <li>背景图片： npm install url-loader file-loader -D</li>

    <li>babel-loader(新版本webpack好像不用安装了)</li>

    <li>打包发布：package.json增加生产环境build
        npm run build
    </li>
    <li>sourceMap:生产环境对代码压缩、混淆后，debug很难；sourceMap存储着代码压缩混淆前后的对应关系，可以将出错的代码转换为源代码</li>
    <li>开发环境的sourceMap:devtool:'dev-source-map'</li>
    <li>生产环境的sourceMap:生产环境则不能生成sourceMap，防止代码泄露；通常只暴露行号不暴露代码 </li>

</ul>
webpack 建立项目
<ul>
    <li>新建空白目录，并运行npm init -y命令，生成package.json</li>
    <li>新建src代码目录</li>
    <li>src新建index.html和index.js</li>
    <li>初始化首页基本结构</li>
    <li>使用npm install jquery -S命令，安装jQuery</li>
    <li>通过ES6模块化的方式导入jquery</li>
    <li>浏览器不支持ES6 Uncaught SyntaxError: Cannot use import statement outside a module (at index.js:2:1)</li>
    <li>npm install webpack@5.5.1 webpack-cli@4.3.0 -D</li>
    <li>新建webpack.config.js，设置mode为开发环境,可选值development和production。开发环境，不会进行代码压缩和性能优化，打包速度快；生产环境则相反</li>
    <li>修改package.json scripts设置环境{ "dev": "webpack" }</li>
    <li>执行 npm run dev(dev和scripts中的环境相对应)，可以发现增加了dist目录，以及main.js</li>
    <li>修改index.js导入，引入main.js</li>

</ul>

<div id="box"></div>
<!--<script src="../dist/main.js"></script>-->
<!--serve模式，通过项目跟目录访问-->
<!--<script src="/main.js"></script>-->
<!--<script src="../webpack.config.js"></script>-->
</body>
</html>
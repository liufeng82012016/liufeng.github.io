# 分布式一致性

### 分布式id
1. 特性
   1. 全局唯一
   2. 高性能
   3. 高可用
   4. 好接入
   5. 趋势递增
2. 实现方案
   1. UUID
   2. 数据库自增id
   3. 数据库集群：设置不同的起始值和相同的自增步长（即增长数）
   4. 基于数据的号段模式：业务类型+序号（version乐观锁更新）
   5. redis自增
   6. 雪花算法：正数位（1bit）+时间戳（41bit）+数据中心id（5bit）+机器id（5bit）+自增值（12比特）=64bit=8byte。会受时钟回拨问题影响
   7. 百度uid-generator：雪花算法改进版
   8. 美团leaf：支持数据的号段模式和雪花算法模式
   9. 滴滴tinyid
3. 附
   1. 时钟回拨问题
      1. 产生原因：硬件时钟可能会因为各种原因发生不准的情况，网络中提供了ntp服务器来做时间校准，校准时可能发生时钟的跳跃或者回拨的问题。

### 分布式hash算法